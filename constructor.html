<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Prueba de conexión</title>
</head>
<body>
  <h1>Test de Guardado de Formulario</h1>
  <input type="text" id="titulo" placeholder="Título del formulario" />
  <button onclick="guardar()">Guardar</button>

  <script>
    const urlWebApp = "https://script.google.com/macros/s/AKfycbxs4YjQT2QHS3quSyVQLbbv57RIZcI8C2PRcMQoDAs1qSmX9CdmMRp5K6YgUyjf9dqV/exec";

    async function guardar() {
      const titulo = document.getElementById("titulo").value.trim();
      if (!titulo) {
        alert("Escribí un título");
        return;
      }

      const estructura = [
        { label: "Nombre", type: "text" },
        { label: "Edad", type: "number" }
      ];

      try {
        const res = await fetch(urlWebApp, {
          method: "POST",
          body: JSON.stringify({
            action: "guardarFormulario",
            titulo,
            estructura
          }),
          headers: {
            "Content-Type": "application/json"
          }
        });

        const json = await res.json();
        console.log(json);
        if (json.status === "ok") {
          alert("Formulario guardado correctamente");
        } else {
          alert("Error del servidor: " + json.message);
        }
      } catch (error) {
        console.error("Error al conectar:", error);
        alert("Error al conectar con el servidor.");
      }
    }
  </script>
</body>
</html>

